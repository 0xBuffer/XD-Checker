<Window x:Class="XDCheckerRecode.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="RootWindow"
        Title="XDChecker Recode"
        Height="600" Width="800"
        AllowsTransparency="True" WindowStyle="None" Background="Transparent"
        WindowStartupLocation="CenterScreen" FontFamily="Segoe UI" Cursor="Arrow">
    <Window.Resources>
        <!-- Menu Button Styles -->
        <Style TargetType="Button" x:Key="MenuButtonTheme">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="20,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#20FFFFFF"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="Button" x:Key="CloseMenuButtonTheme">
             <Setter Property="Background" Value="Transparent"/>
             <Setter Property="Foreground" Value="#AAAAAA"/>
             <Setter Property="FontSize" Value="14"/>
             <Setter Property="BorderThickness" Value="0"/>
             <Setter Property="Template">
                 <Setter.Value>
                     <ControlTemplate TargetType="Button">
                         <Border Background="{TemplateBinding Background}" CornerRadius="4">
                             <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"/>
                         </Border>
                     </ControlTemplate>
                 </Setter.Value>
             </Setter>
             <Style.Triggers>
                 <Trigger Property="IsMouseOver" Value="True">
                     <Setter Property="Background" Value="#33FF0000"/>
                     <Setter Property="Foreground" Value="White"/>
                 </Trigger>
             </Style.Triggers>
        </Style>

        <Style TargetType="Button" x:Key="WindowControlButtonStyle">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#20FFFFFF"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style TargetType="Button" x:Key="CloseWindowButtonStyle" BasedOn="{StaticResource WindowControlButtonStyle}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E81123"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>
    
    <!-- Main Background with Blur Tint -->
    <Border x:Name="BackgroundBorder" CornerRadius="8" Background="#CC1a1a2e">
        <Grid ClipToBounds="True">
            
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/> <!-- SideMenu Placeholder if inline, but we use overlay -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Main Content Area -->
            <Grid x:Name="MainGrid" Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="24"/> <!-- Small Custom Title Bar -->
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Custom Title Bar -->
                <Grid Grid.Row="0" Background="#15FFFFFF">
                     <!-- Menu Toggle Button (in Title Bar) -->
                     <Button x:Name="MenuButton" Content="&#9776;" FontSize="12" Foreground="White"
                            Width="36" Height="24" HorizontalAlignment="Left" VerticalAlignment="Center"
                            Background="Transparent" BorderBrush="Transparent" Style="{StaticResource WindowControlButtonStyle}"/>

                    <!-- App Title -->
                    <TextBlock Text="XD Checker Recode" FontSize="12" FontWeight="SemiBold" Foreground="#DDFFFFFF" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" IsHitTestVisible="False"/>

                    <!-- Window Controls -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <!-- Minimize Button (Collapse SVG) -->
                        <Button Style="{StaticResource WindowControlButtonStyle}" Click="MinimizeButton_Click">
                            <Path Data="M6 9L12 15L18 9" Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                        <!-- Close Button (Close SVG) -->
                        <Button Style="{StaticResource CloseWindowButtonStyle}" Click="CloseButton_Click">
                            <Path Data="M18 6L6 18M6 6L18 18" Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!-- Page Content -->
                <Frame x:Name="MainFrame" Grid.Row="1" NavigationUIVisibility="Hidden" Margin="0" ClipToBounds="True"/>
                
            </Grid>

            <!-- Side Menu Overlay -->
            <Border x:Name="SideMenu" Width="250" HorizontalAlignment="Left" Background="#E616213e" Margin="-250,0,0,0" BorderBrush="#33FFFFFF" BorderThickness="0,0,1,0" Grid.ColumnSpan="2" Panel.ZIndex="100">
                <Grid Margin="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Menu Header -->
                    <Grid Grid.Row="0" Margin="20,20,20,10">
                        <TextBlock Text="Меню" FontSize="24" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                        <Button x:Name="CloseMenuButton" HorizontalAlignment="Right" VerticalAlignment="Center" Width="30" Height="30" Style="{StaticResource CloseMenuButtonTheme}">
                            <Path Data="M18 6L6 18M6 6L18 18" Stroke="#AAAAAA" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Width="12" Height="12" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                    </Grid>
                    
                    <StackPanel Grid.Row="1" Margin="10">
                        <!-- Navigation Buttons -->
                        <Button x:Name="CheckButton" Content="Проверка" Style="{StaticResource MenuButtonTheme}" Margin="0,0,0,5"/>
                        <Button x:Name="ProgramsButton" Content="Программы" Style="{StaticResource MenuButtonTheme}" Margin="0,0,0,5"/>
                        <Button x:Name="AboutButton" Content="О программе" Style="{StaticResource MenuButtonTheme}" Margin="0,0,0,5"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>